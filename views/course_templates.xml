<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Course Detail Page Template -->
    <template id="course_detail" name="Course Detail Page">
        <t t-call="website.layout">
            <div class="oa-course-detail">
                <!-- Hero Section -->
                <section class="oa-course-hero oa-bg-primary">
                    <div class="oa-container">
                        <div class="oa-course-hero-content">
                            <div class="oa-course-hero-info">
                                <div class="oa-course-breadcrumb">
                                    <a href="/courses">Cursos</a>
                                    <span>/</span>
                                    <span t-esc="course.category"/>
                                </div>
                                <h1 class="oa-course-hero-title" t-esc="course.name"/>
                                <p class="oa-course-hero-description" t-esc="course.description"/>
                                
                                <div class="oa-course-hero-meta">
                                    <div class="oa-course-rating">
                                        <div class="oa-stars">
                                            <t t-foreach="range(5)" t-as="star">
                                                <i class="fa fa-star" t-att-class="'fa-star-o' if star >= course.rating else 'fa-star'"/>
                                            </t>
                                        </div>
                                        <span class="oa-rating-text">
                                            <t t-esc="course.rating"/> (<t t-esc="course.review_count"/> reseñas)
                                        </span>
                                    </div>
                                    
                                    <div class="oa-course-stats">
                                        <span class="oa-stat">
                                            <i class="fa fa-users"/>
                                            <t t-esc="course.student_count"/> estudiantes
                                        </span>
                                        <span class="oa-stat">
                                            <i class="fa fa-clock-o"/>
                                            <t t-esc="course.duration"/>
                                        </span>
                                        <span class="oa-stat">
                                            <i class="fa fa-signal"/>
                                            <t t-esc="course.level"/>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="oa-course-hero-video">
                                <div class="oa-video-preview">
                                    <img t-att-src="course.preview_image" alt="Course Preview" class="oa-video-thumbnail"/>
                                    <button class="oa-play-button" data-video-url="/course/preview">
                                        <i class="fa fa-play"/>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Course Content -->
                <section class="oa-course-content">
                    <div class="oa-container">
                        <div class="oa-course-layout">
                            <!-- Main Content -->
                            <div class="oa-course-main">
                                <!-- What You'll Learn -->
                                <div class="oa-course-section">
                                    <h2>¿Qué aprenderás?</h2>
                                    <div class="oa-learning-objectives">
                                        <div class="oa-grid oa-grid-2">
                                            <t t-foreach="course.learning_objectives" t-as="objective">
                                                <div class="oa-objective-item">
                                                    <i class="fa fa-check oa-text-success"/>
                                                    <span t-esc="objective"/>
                                                </div>
                                            </t>
                                        </div>
                                    </div>
                                </div>

                                <!-- Course Content/Curriculum -->
                                <div class="oa-course-section">
                                    <h2>Contenido del Curso</h2>
                                    <div class="oa-curriculum">
                                        <t t-foreach="course.chapters" t-as="chapter">
                                            <div class="oa-chapter">
                                                <div class="oa-chapter-header">
                                                    <h3 class="oa-chapter-title" t-esc="chapter.name"/>
                                                    <span class="oa-chapter-meta">
                                                        <t t-esc="len(chapter.lessons)"/> lecciones • 
                                                        <t t-esc="chapter.duration"/>
                                                    </span>
                                                </div>
                                                <div class="oa-chapter-lessons">
                                                    <t t-foreach="chapter.lessons" t-as="lesson">
                                                        <div class="oa-lesson">
                                                            <i class="fa fa-play-circle"/>
                                                            <span class="oa-lesson-title" t-esc="lesson.name"/>
                                                            <span class="oa-lesson-duration" t-esc="lesson.duration"/>
                                                        </div>
                                                    </t>
                                                </div>
                                            </div>
                                        </t>
                                    </div>
                                </div>

                                <!-- Requirements -->
                                <div class="oa-course-section">
                                    <h2>Requisitos</h2>
                                    <ul class="oa-requirements-list">
                                        <t t-foreach="course.requirements" t-as="requirement">
                                            <li t-esc="requirement"/>
                                        </t>
                                    </ul>
                                </div>

                                <!-- Description -->
                                <div class="oa-course-section">
                                    <h2>Descripción</h2>
                                    <div class="oa-course-description" t-raw="course.full_description"/>
                                </div>
                            </div>

                            <!-- Sidebar -->
                            <div class="oa-course-sidebar">
                                <div class="oa-course-card oa-sticky">
                                    <div class="oa-course-card-header">
                                        <div class="oa-price">
                                            <span class="oa-price-current" t-esc="course.price"/>
                                            <span class="oa-price-original" t-if="course.original_price" t-esc="course.original_price"/>
                                        </div>
                                        <div class="oa-discount" t-if="course.discount">
                                            <span class="oa-badge oa-badge-success">
                                                <t t-esc="course.discount"/>% OFF
                                            </span>
                                        </div>
                                    </div>

                                    <div class="oa-course-card-content">
                                        <t t-if="course.is_enrolled">
                                            <a href="/course/continue" class="oa-btn oa-btn-success oa-btn-block">
                                                Continuar Curso
                                            </a>
                                        </t>
                                        <t t-else="">
                                            <a href="/course/enroll" class="oa-btn oa-btn-primary oa-btn-block">
                                                Inscribirse Ahora
                                            </a>
                                        </t>
                                        
                                        <div class="oa-course-includes">
                                            <h4>Este curso incluye:</h4>
                                            <ul>
                                                <li><i class="fa fa-video-camera"/> <t t-esc="course.video_hours"/> horas de video</li>
                                                <li><i class="fa fa-file-text"/> <t t-esc="course.articles_count"/> artículos</li>
                                                <li><i class="fa fa-download"/> Recursos descargables</li>
                                                <li><i class="fa fa-mobile"/> Acceso móvil</li>
                                                <li><i class="fa fa-certificate"/> Certificado de finalización</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <!-- Instructor Info -->
                                <div class="oa-instructor-card">
                                    <h3>Instructor</h3>
                                    <div class="oa-instructor-info">
                                        <img t-att-src="course.instructor.avatar" alt="Instructor" class="oa-instructor-avatar"/>
                                        <div class="oa-instructor-details">
                                            <h4 t-esc="course.instructor.name"/>
                                            <p t-esc="course.instructor.title"/>
                                            <div class="oa-instructor-stats">
                                                <span>
                                                    <i class="fa fa-star"/>
                                                    <t t-esc="course.instructor.rating"/> rating
                                                </span>
                                                <span>
                                                    <i class="fa fa-users"/>
                                                    <t t-esc="course.instructor.student_count"/> estudiantes
                                                </span>
                                                <span>
                                                    <i class="fa fa-play-circle"/>
                                                    <t t-esc="course.instructor.course_count"/> cursos
                                                </span>
                                            </div>
                                            <p class="oa-instructor-bio" t-esc="course.instructor.bio"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Related Courses -->
                <section class="oa-related-courses oa-bg-alt">
                    <div class="oa-container">
                        <h2 class="text-center">Cursos Relacionados</h2>
                        <div class="oa-grid oa-grid-3">
                            <t t-foreach="related_courses" t-as="related_course">
                                <t t-call="theme_outliers_academy.course_card">
                                    <t t-set="course" t-value="related_course"/>
                                </t>
                            </t>
                        </div>
                    </div>
                </section>
            </div>
        </t>
    </template>

    <!-- Course Card Component -->
    <template id="course_card" name="Course Card">
        <div class="oa-course-card">
            <div class="oa-course-card-image">
                <img t-att-src="course.image_url" t-att-alt="course.name" class="img-fluid"/>
                <div class="oa-course-card-overlay">
                    <a t-att-href="'/course/' + str(course.id)" class="oa-btn oa-btn-primary oa-btn-sm">
                        Ver Curso
                    </a>
                </div>
                <button class="oa-favorite-btn" data-course-id="course.id">
                    <i class="fa fa-heart-o"/>
                </button>
            </div>
            
            <div class="oa-course-card-content">
                <div class="oa-course-card-meta">
                    <span class="oa-badge oa-badge-primary" t-esc="course.category"/>
                    <span class="oa-course-duration" t-esc="course.duration"/>
                </div>
                
                <h3 class="oa-course-title">
                    <a t-att-href="'/course/' + str(course.id)" t-esc="course.name"/>
                </h3>
                
                <p class="oa-course-description" t-esc="course.short_description"/>
                
                <div class="oa-course-instructor">
                    <img t-att-src="course.instructor.avatar" alt="Instructor" class="oa-instructor-thumb"/>
                    <span t-esc="course.instructor.name"/>
                </div>
                
                <div class="oa-course-card-footer">
                    <div class="oa-course-price">
                        <span class="oa-price-current" t-esc="course.price"/>
                        <span class="oa-price-original" t-if="course.original_price" t-esc="course.original_price"/>
                    </div>
                    
                    <div class="oa-course-rating">
                        <div class="oa-stars">
                            <t t-foreach="range(5)" t-as="star">
                                <i class="fa fa-star" t-att-class="'fa-star-o' if star >= course.rating else 'fa-star'"/>
                            </t>
                        </div>
                        <span class="oa-rating-count">(<t t-esc="course.review_count"/>)</span>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <!-- Course Progress Component -->
    <template id="course_progress" name="Course Progress">
        <div class="oa-progress-container">
            <div class="oa-progress-info">
                <span class="oa-progress-label">Progreso del Curso</span>
                <span class="oa-progress-percentage"><t t-esc="progress"/>%</span>
            </div>
            <div class="oa-progress-bar" t-att-data-progress="progress">
                <div class="oa-progress-fill" t-att-style="'width: ' + str(progress) + '%'"/>
            </div>
        </div>
    </template>

</odoo>
